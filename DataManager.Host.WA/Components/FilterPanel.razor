@using Microsoft.FluentUI.AspNetCore.Components
@using Microsoft.FluentUI.AspNetCore.Components.Icons
@using Orientation=Microsoft.FluentUI.AspNetCore.Components.Orientation
@implements IDialogContentComponent<FilterPanelParameters>

<FluentDialogBody>
    <FluentStack Orientation="Orientation.Vertical" VerticalGap="20">

        <div style="width : 100%;">
            <h5>Filters</h5>
            <p style="font-size: 12px; color: #666; margin-bottom: 12px;">Drag to reorder, check to show/hide</p>
            <FluentSortableList @bind-Items="Content.Filters" OnUpdate="@HandleFilterOrderUpdate">
                <ItemTemplate>
                    <div style="cursor: move; display: flex; align-items: center; gap: 8px; width: 100%;">
                        <FluentCheckbox @bind-Value="@context.Visible" />
                        <span>@context.Label</span>
                    </div>
                </ItemTemplate>
            </FluentSortableList>
        </div>

    </FluentStack>
</FluentDialogBody>

<FluentDialogFooter>
    <FluentButton Appearance="Appearance.Accent" OnClick="HandleSaveAsync" Disabled="@IsSaving">
        @if (IsSaving)
        {
            <FluentIcon Value="@(new Icons.Regular.Size16.ArrowSync())" Color="Color.Neutral" />
            <span>Saving...</span>
        }
        else
        {
            <span>Save</span>
        }
    </FluentButton>
    
    <FluentButton Appearance="Appearance.Neutral" OnClick="HandleCancelAsync">
        Close
    </FluentButton>
</FluentDialogFooter>
